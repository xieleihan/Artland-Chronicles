import{l as a,m as e,p as l,O as s,d as t,r as A,o as c,c as n,w as o,a as u,b as g,e as i,t as r,g as d,h as f,F as v,q as m,u as w,v as h,x as p,y as S,n as E,i as B}from"./index-Dup31IlJ.js";import{_ as C}from"./left.B_OHKxJy.js";import{g as R,m as J}from"./request.BbZToc3h.js";import{_ as I}from"./_plugin-vue_export-helper.BCo6x5W8.js";const _=(s=>(t,A=l())=>{!a&&e(s,t,A)})(s),y=I(t({__name:"mangaInfo",setup(a){const e=A(""),l=A({}),s=A(""),t=A([]),I=A(""),y=A([]);A(""),A("");const Q=A([]),M=A(!1),N=A([]),U=A([]);function Y(){M.value=!M.value}async function k(){w({title:"加载中"});let a=[],e=[],l=[],s=[];const t=Q.value.length;for(let A=t-1;A>=0;A--)a.push(Q.value[A].id);for(let A=0;A<t;A++)e.push(J+"/GetImageIndex?epId="+a[A]);for(let A=0;A<t;A++)await h({url:e[A],method:"GET"}).then((async a=>{console.log(a);const e=JSON.stringify(a),s=JSON.parse(e);console.log(s.data.data.images);for(let t=0;t<s.data.data.images.length-1;t++)l.push("https://manga.hdslb.com"+s.data.data.images[t].path+"@660w.webp")})).catch((a=>{console.log("host代理网络请求错误",a)}));for(let A=0;A<l.length;A++)await R("manga",'ImageToken?urls=["'+l[A]+'"]').then((a=>{console.log(a);const e=JSON.stringify(a),l=JSON.parse(e);s.push(l.data[0].complete_url)})).catch((a=>{console.log("请求含有真实地址错误",a)}));console.log("真实图片的数组",s),p({key:"mangaList",data:s,success:function(){S(),E({url:"/pages/manga/mangaPages"})},fail:function(){console.log("写入存储失败")}})}return _((a=>{console.log("漫画ID:",a.comic_id),e.value=a.comic_id,R("manga",`ComicDetail?comicId=${e.value}`).then((a=>{console.log(a);const e=JSON.stringify(a),A=JSON.parse(e);l.value=A.data,s.value=A.data.title,t.value=A.data.author_name,y.value=A.data.styles,I.value=A.data.evaluate,Q.value=A.data.ep_list})).catch((a=>{console.log("获取漫画详情出错",a)})),R("manga",`GetReviewDetailByComicID?comicId=${e.value}`).then((a=>{console.log(a);const e=JSON.stringify(a),l=JSON.parse(e);N.value=l.data.short_reviews;for(let s=0;s<6;s++)U.value.push(N.value[s])})).catch((a=>{console.log("获取精选漫画点评出错",a)}))})),(a,e)=>{const A=B;return c(),n(A,{class:"mangaInfo"},{default:o((()=>[u(A,{class:"top"},{default:o((()=>[g("img",{src:`${l.value.horizontal_cover}`,alt:""},null,8,["src"]),u(A,{class:"collect"},{default:o((()=>[g("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAeFJREFUWEfFl+FRwzAMha1N6CTQSWgnoZ2k7SSUSWATkZeTfGoSW5bTXvIH7kisT/LTk6C08UMbx0+rAZj5jYj+ehPpBkDglNKvBN4T0b0HYg3AtwRE9h8pJUCEK9EFwMxfQ/BTSmknEIC5EtE5WoUwgCn9SQNaoGgVegCQ/YGINPsxaWaGHu5EdIxUIQSwlL0GY2boAFdxJKJrK0QUAAHQdg/ZG4hLVJAuADMfhszeEVgO35XuWSoESHQD2vIHv9d0MQMwAVFSBNUHZb15/S5XAWCA6/fqEfiJM3K7ZgAJjBLi0TtEBhBWuL8n2gCQJgSo3EEWoEvFrWKb6kR1ZAHUXDJd9HDvfdMp8wpILytEt7eXIEwLwzGzVyyJMNvsmru3ICY49LS3f1tsQ3E1vNc1YKZVYOaifxR94FkQteAArQGgXUAe9veJ4uEHRU1VnVCm3GzweGo3AKMr1gbUqwFGY1sDgAMwfB6UG6iA+71XAbeENZiWK2wBgAjDq5YYGwR4Gb4vxvEA2A6OibngcJhWcRc0A644wlsA8oYjjjauZGZqniv7gW5JcQBjnxAgPOFTRipGM4K6a5c9o7RHeBXQfzwA0LSQLNgwNFBcVD0AXSJWLSW1TnF3wtae731vc4B/uKwJMGXVSl0AAAAASUVORK5CYII=",alt:""}),g("span",null,"收藏")])),_:1})])),_:1}),u(A,{class:"container"},{default:o((()=>[u(A,{class:"title"},{default:o((()=>[i(r(s.value),1)])),_:1}),u(A,{class:"smallBox"},{default:o((()=>[u(A,{class:"author"},{default:o((()=>[i(r(t.value[0]),1)])),_:1}),i("| "),u(A,{class:"styles"},{default:o((()=>[(c(!0),d(v,null,f(y.value,((a,e)=>(c(),d("span",{key:e},r(a),1)))),128))])),_:1})])),_:1}),u(A,{class:"evaluate"},{default:o((()=>[i(r(I.value),1)])),_:1}),u(A,{class:"review"},{default:o((()=>[u(A,{class:"reviewTop"},{default:o((()=>[g("span",null,"精选评论"),u(A,{class:""},{default:o((()=>[g("span",{class:"more"},"查看更多"),g("img",{src:C,alt:""})])),_:1})])),_:1}),u(A,{class:"reviewContainer"},{default:o((()=>[(c(!0),d(v,null,f(U.value,((a,e)=>(c(),n(A,{class:"item",key:e},{default:o((()=>[u(A,{class:"left"},{default:o((()=>[g("img",{class:"avater",src:`${a.face}`,alt:""},null,8,["src"])])),_:2},1024),u(A,{class:"right"},{default:o((()=>[u(A,{class:"username"},{default:o((()=>[i(r(a.nick_name),1)])),_:2},1024),u(A,{class:"content"},{default:o((()=>[i(r(a.content),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1})])),_:1}),u(A,{class:"directoryBox"},{default:o((()=>[u(A,{class:"left",onClick:Y},{default:o((()=>[g("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAY9JREFUWEftl9FNAzEMhv++MQJvwB5IwAhMAExAmQDYgA2ADdgAEIPAI4+M0PvQRUpT++KmPU5IjVSdTvXZX2wn+TPTxGNWiX/b/3/q2O1L+h7w8SXpXdKTZ+MBHEp67T7kycBROfYkAfDT/6wY+fdnlh8PgODM+k7SvUOP84vexrPLbZjEUenLAiAwAKTtqlKiCAQuLjufJ5Y/CwDjx652pOwt0KNRCNOVBUDjkVLSZdXeq3WtHKMC4LwpE9vKQJrd2hDbBlg7E2MAeBA09nPZ2GMBlBAP3WY1t/aVMQFKCN5XNqyxARLEdZ+BF0nn+Xr8CwDiHUv6kEQpbqYAYHl+TlWCVIYdwC4DzRngeE7SqjxSa4IlP6SaARAoB44w8eRaaf6/lyH0XgmGFFsu5zbKAMeody8YAshleBNAVJQGdOuvKmYiNO3SJWVTWR4Jjg3BgQgBkC4+4AktKiaqjq3uT2qZniCrSyNyNWsNng4hnvhg9iv3jKHLKRmg+bjRtKyCFJjg7n5Rux1Ha9xstwD92IUhRA9QMAAAAABJRU5ErkJggg==",alt:""}),g("span",null,"目录")])),_:1}),u(A,{class:"center"},{default:o((()=>[(c(!0),d(v,null,f(Q.value,((a,e)=>(c(),n(A,{class:"page",key:e},{default:o((()=>[i(r(e),1)])),_:2},1024)))),128))])),_:1}),u(A,{class:"right"},{default:o((()=>[u(A,{class:"readManga",onClick:k},{default:o((()=>[i(" 立即阅读 ")])),_:1})])),_:1})])),_:1}),u(A,{class:"directory",style:m(!1===M.value?"height:0%":"height:80%")},{default:o((()=>[u(A,{class:"box"},{default:o((()=>[u(A,{class:"directoryTop"},{default:o((()=>[g("span",null,"目录"),g("img",{onClick:Y,src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAnZJREFUWEe1VwtSAjEMTToeojjCrCcRTgKeBDiJehLwJO6gIz2Etk7SLfvrtinqzjDMsCV5TV7yEoSCR+uqArBrQLcEwAoA6FN7E64GxBqsfTHm4yg1i7mDrVPYsTMHzwD2FeCmNqau/Xt6vioGhbDmbz6nXuhMykcSgNaLLSDswMHOmNM+Bza874DeEJDUf6MA2AB+P5FBc35fSR0Pz/WBqFUsGiMA3rl9K711CmQTyQ24MYgegMb5AZx9LCGSJEJazzeAuB2C6AOYzQ/g8FiSb4nzlhvMqY05n+7DbxcAPkxu+ZucS8Do24Xn1ufpkb5bALOFA6fuc2UjcUJnKJ0xW22aPR8YAKOyUMdCfw0vtL5bAqrD1IU42goqioIHkLl9CYjWuV1NETnYIy4gs1PhQ8jJVIglICTOL4Rkwrs9+vC7V2Pen3P5TYEoce454tOAukEirfsYiFLnHgDxBLeoZ4u3WIdKdzbultyw+BwTbjrnMVvhIgTAmfMpq4rRPk8gSJILnYcypUv8AkBTaizR17VuuvyVKQh1blc0F4R0SHk0iIAvB+mfY4STlOg4hYGEVA7UmwUDR4rtpSBC/8FQDjkRkpRaCYhQ/hgGkFQlSJz3xrGmRFNpDdXXilFHIkf5Yq2Q1/lQ8cb5H4qRH8NIvUZz25SsStp2Qo6p+bH0dwYSmSjlHOfe+9y3U1cHQDMJ//tI1p+6JobS9Cyfu2W893PzeurOg72RbMzivwPRjuXjlp1YTOwBEI5g1f7aOVGy4EyqYMl6FVVKXmLza11WhsuWU/Vw2ZwzO2EAnQXQ4wZtwEqtwTm/CQ/Xc4dH2pylwka2fwBZDSIn/0e4zAAAAABJRU5ErkJggg==",alt:""})])),_:1}),u(A,{class:"directoryContainer"},{default:o((()=>[(c(!0),d(v,null,f(Q.value,((a,e)=>(c(),n(A,{class:"item",key:e},{default:o((()=>[u(A,{class:"left"},{default:o((()=>[g("img",{src:`${a.cover}`,alt:""},null,8,["src"])])),_:2},1024),g("div",{class:"right"},[g("div",{class:"number"},"第"+r(a.ord)+"话",1),g("div",{class:"title"},r(a.title),1)]),g("img",{class:"ico",src:C,alt:""})])),_:2},1024)))),128))])),_:1})])),_:1})])),_:1},8,["style"])])),_:1})}}}),[["__scopeId","data-v-78a857d7"]]);export{y as default};
